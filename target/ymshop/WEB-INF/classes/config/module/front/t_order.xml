<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><!-- create by autoCode,v1.0.0 --><mapper namespace="front.order">	<select id="front.order.selectPageList" parameterType="net.yozo.services.front.order.bean.Order" resultType="net.yozo.services.front.order.bean.Order"> select o.*,c.name as catalogName from t_order o,t_catalog c,t_template t where  o.account=#{account} and o.type=0		<if test="status!=null and status!=''">			and o.status=#{status}		</if>		<if test="payType!=null and payType!=''">			and o.payType=#{payType}		</if>		<if test="payType=null or payType=''">			and o.payType IN (1,2)		</if>		and o.templateId=t.id and t.catalogID=c.id order by id desc limit #{offset},#{pageSize} 	</select> 	<select id="front.order.selectPageCount" parameterType="net.yozo.services.front.order.bean.Order" resultType="java.lang.Integer">	 select count(*) from t_order t where account=#{account} and t.type=0		<if test="status!=null and status!=''">			and status=#{status}		</if>		<if test="payType!=null and payType!=''">			and payType=#{payType}		</if>		<if test="payType=null or payType=''">			and payType IN (1,2)		</if>	</select>		<select id="front.order.selectList" parameterType="net.yozo.services.front.order.bean.Order" resultType="net.yozo.services.front.order.bean.Order">	 SELECT o.*	  FROM t_order o	where  account=#{account} and o.type=0	<if test="queryOrderIDs!=null and queryOrderIDs.size &gt; 0">	  and o.id in <foreach item="item" index="index" collection="queryOrderIDs" open="(" separator="," close=")">    			#{item}   		</foreach> 	</if>	order by o.id desc 	</select>		<select id="front.order.selectOrderInfo" parameterType="net.yozo.services.front.order.bean.Order" resultType="net.yozo.services.front.order.bean.Order">	 SELECT o.*	  FROM t_order o	where account=#{account} and o.id=#{id}	</select> 	<insert id="front.order.insert" parameterType="net.yozo.services.front.order.bean.Order" useGeneratedKeys="true" keyProperty="id">		insert into t_order		(		id,createTime,status,templateId,templateName,payType		<if test="account!=null and account!=''">		,account		</if>		<if test="orderNum!=null and orderNum!=''">			,orderNum		</if>		<if test="remark!=null and remark!=''">		,remark		</if>		<if test="amount!=null">		,amount		</if>		<if test="payChannel!=null">			,payChannel		</if>		<!--<if test="closedComment!=null and closedComment!=''">		,closedComment		</if>-->		<if test="score!=0">		,score		</if>		<if test="type!=0">			,type		</if>		<if test="customizeId!=0">			,customize_id		</if>		)		values		(		id,now(),#{status},#{templateId},#{templateName},#{payType}		<if test="account !=null and account !=''">		,#{account}		</if>		<if test="orderNum !=null and orderNum !=''">			,#{orderNum}		</if>		<if test="remark !=null and remark !=''">		,#{remark}		</if>		<if test="amount!=null">		,#{amount}		</if>		<if test="payChannel!=null">			,#{payChannel}		</if>		<!--<if test="closedComment!=null and closedComment!=''">		,#{closedComment}		</if>-->		<if test="score!=0">		,#{score}		</if>		<if test="type!=0">		,#{type}		</if>		<if test="customizeId!=0">			,#{customizeId}		</if>	)</insert>		<update id="front.order.update" parameterType="net.yozo.services.front.order.bean.Order">		update t_order		  set id=#{id}		<if test="status!=null and status!=''">		,status=#{status}		</if>		<if test="payType != null">			,payType=#{payType}		</if>		<if test="payChannel != null">			,payChannel=#{payChannel}		</if>		<!--<if test="paystatus!=null and paystatus!=''">			,paystatus=#{paystatus}		</if>-->		<if test="account !=null and account !=''">		,account=#{account}		</if>		<if test="orderNum !=null and orderNum !=''">			,orderNum=#{orderNum}		</if>		<if test="remark !=null and remark !=''">		,remark=#{remark}		</if>		<if test="amount!=0">		,amount=#{amount}		</if>		<!--<if test="closedComment!=null and closedComment!=''">		,closedComment=#{closedComment}		</if>-->		 where id=#{id}	</update>		<select id="front.order.selectOne" parameterType="net.yozo.services.front.order.bean.Order" resultType="net.yozo.services.front.order.bean.Order">	 select * from t_order t where id=#{id}	</select>	<select id="front.order.selectByAccAndTid" parameterType="net.yozo.services.front.order.bean.Order" resultType="net.yozo.services.front.order.bean.Order">		select * from t_order t where account=#{account} and templateId=#{templateId} limit 1	</select>		<select id="front.order.selectById" parameterType="string" resultType="net.yozo.services.front.order.bean.Order">	 select * from t_order t where id=#{id}	</select>		<select id="front.order.selectOrdersSimpleReport" parameterType="string" resultType="net.yozo.services.front.order.bean.OrderSimpleReport">SELECT (SELECT count(*) FROM t_order where account=#{account}  and status='success' and payType in (1,2) and type=0) orderPayCount,(SELECT count(*) FROM t_order where account=#{account} and status='wait' and payType in (1,2) and type=0) orderWaitCountFROM t_systemsetting	</select>	<select id="front.order.loadOrdersReport" resultType="net.yozo.services.front.order.bean.OrdersReport">		SELECT		(SELECT count(*) FROM t_order where status='cancel' and type=0)  cancelCount,		(SELECT count(*) FROM t_order where status='init' and type=0)  notPayCount,		(SELECT count(*) FROM t_order where  status='init' and type=0)  payButNotPassCount,		(SELECT count(*) FROM t_order where  status='pass' and type=0)  waitSendGoodsCount,		(SELECT count(*) FROM t_order where status='WAIT_SELLER_AGREE' and type=0)  WAIT_SELLER_AGREE,		(SELECT count(*) FROM t_order where status='SELLER_REFUSE_BUYER' and type=0)  SELLER_REFUSE_BUYER,		(SELECT count(*) FROM t_order where status='WAIT_BUYER_RETURN_GOODS' and type=0)  WAIT_BUYER_RETURN_GOODS,		(SELECT count(*) FROM t_order where status='WAIT_SELLER_CONFIRM_GOODS' and type=0)  WAIT_SELLER_CONFIRM_GOODS		FROM t_systemsetting	</select>		<delete id="front.order.deleteById" parameterType="net.yozo.services.front.order.bean.Order">		delete from t_order where id=#{id}	</delete>	<select id="front.order.selectByOrderNum" parameterType="string" resultType="net.yozo.services.front.order.bean.Order">		select * from t_order  where orderNum=#{orderNum}	</select>	<select id="front.order.selectYoudianOrder" parameterType="net.yozo.services.front.order.bean.Order" resultType="net.yozo.services.front.order.bean.Order">		select * from t_order t where templateName=#{templateName}  and account=#{account}		<if test="amount!=null and amount!=''">			and amount=#{amount}		</if>		<if test="status!=null and status!=''">			and status=#{status}		</if>		 limit 1	</select>	<select id="front.order.selectCount" parameterType="net.yozo.services.front.order.bean.Order" resultType="int">		select count(*) from t_order t where t.type=0		<if test="status!=null and status!=''">			and status=#{status}		</if>		<if test="payType != null and payType!='' and payType!=0">			and payType=#{payType}		</if>		<if test="payChannel != null and payChannel!='' and payChannel!=0" >			and payChannel=#{payChannel}		</if>		<if test="account !=null and account !=''">			and account=#{account}		</if>		<if test="orderNum !=null and orderNum !=''">			and orderNum=#{orderNum}		</if>		<if test="remark !=null and remark !=''">			and remark=#{remark}		</if>		<if test="amount!=null and amount !='' and amount!=0">			and amount=#{amount}		</if>	</select>	<select id="front.order.selectOrderRecordForCustomize" parameterType="net.yozo.services.front.order.bean.OrderRecordForCustomize" resultType="net.yozo.services.front.order.bean.OrderRecordForCustomize">		SELECT t_account.nickname ,t_catalog.name ,t_order.amount,t_order.createtime from t_order		LEFT JOIN t_customize_order on t_order.customize_id = t_customize_order.id		LEFT JOIN t_account on t_order.account = t_account.id		LEFT JOIN t_catalog on t_customize_order.c_type = t_catalog.id		where  t_order.`status` = #{status} and t_order.type = #{type} and t_customize_order.creator = #{creatorID}		order by t_order.createtime desc		limit #{offset},#{pageSize} ;	</select>	<select id="front.order.selectCountOrderRecordForCustomize" parameterType="net.yozo.services.front.order.bean.OrderRecordForCustomize" resultType="java.lang.Integer">		SELECT count(*) from t_order		LEFT JOIN t_customize_order on t_order.customize_id = t_customize_order.id		where  t_order.`status` = #{status} and t_order.type = #{type} and t_customize_order.creator = #{creatorID};	</select>	<select id="front.order.selectCustomizeOrder" parameterType="net.yozo.services.front.order.bean.Order" resultType="net.yozo.services.front.order.bean.Order">		SELECT * FROM t_order WHERE customize_id=#{customizeId} AND type =1	</select>	<select id="front.order.selectAllIncomeByAccount" parameterType="net.yozo.services.front.order.bean.Order" resultType="String">		SELECT SUM(amount) FROM t_order o		WHERE STATUS="success" AND o.payType=2 AND (o.templateId IN(SELECT t.id FROM t_template t WHERE t.author=#{account}) AND o.STATUS="success"		OR o.customize_id IN(SELECT c.id FROM t_customize_order c WHERE c.creator=#{account} AND c.STATUS=3))	</select>	<select id="front.order.selectIncomePageList" parameterType="net.yozo.services.front.order.bean.Order" resultType="net.yozo.services.front.order.bean.Order">		SELECT * FROM(		SELECT o.id,o.templateName,o.amount,o.type,t.nowPrice,IFNULL(c.finish_time,o.createtime) finishTime FROM t_order o		LEFT JOIN t_template t ON t.id=o.templateId		LEFT JOIN t_customize_order c ON c.id=o.customize_id		WHERE o.STATUS="success" AND o.payType=2 AND (t.author=#{account} OR (c.creator=#{account}  AND c.STATUS=3))		)AS incomes		ORDER BY finishTime DESC		limit #{offset},#{pageSize}	</select>	<select id="front.order.selectIncomePageCount" parameterType="net.yozo.services.front.order.bean.Order" resultType="java.lang.Integer">		SELECT count(*) FROM t_order o		LEFT JOIN t_template t ON t.id=o.templateId		LEFT JOIN t_customize_order c ON c.id=o.customize_id		WHERE o.STATUS="success" AND o.payType=2 AND (t.author=#{account} OR (c.creator=#{account}  AND c.STATUS=3))	</select>	<select id="front.order.selectTemplateSalesCount" parameterType="net.yozo.services.front.order.bean.Order" resultType="int">		select count(o.id) from t_order o		LEFT JOIN t_template tt ON tt.id=o.templateId		WHERE o.STATUS="success" AND o.payType=2 and tt.author=#{account}	</select>	<select id="front.order.selectCustomizeSalesCount" parameterType="net.yozo.services.front.order.bean.Order" resultType="int">		select count(o.id) from t_order o		LEFT JOIN t_customize_order tco ON tco.id=o.customize_id		WHERE o.STATUS="success" AND o.payType=2 and tco.creator=#{account}  AND tco.STATUS=3	</select></mapper>